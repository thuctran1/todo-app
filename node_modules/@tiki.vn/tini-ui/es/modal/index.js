Component({
  data: {
    _buttonsLayout: '',
    adviceClose: 26,
    normalClose: 18
  },
  props: {
    className: '',
    topImageSize: 'md',
    topImageMode: 'widthFix',
    showClose: false,
    show: false,
    closeType: '0',
    mask: true,
    buttonsLayout: 'horizontal',
    disableScroll: true,
    maskClick: false,
    buttons: null,
    onModalClick: function onModalClick() {},
    onButtonClick: function onButtonClick() {},
    onModalClose: function onModalClose() {},
    onMaskClick: function onMaskClick() {}
  },
  deriveDataFromProps: function deriveDataFromProps(nextProps) {
    if (nextProps.show !== this.props.show) this._handleOverlay(nextProps);
  },
  methods: {
    key: null,
    _handleOverlay: function _handleOverlay(props) {
      var _this = this;

      var mask = props.mask,
          maskClick = props.maskClick,
          show = props.show;

      if (!mask) {
        return;
      }

      if (show) {
        this.key = Date.now();
        my.showOverlay({
          touchable: !!maskClick,
          success: function success() {
            if (maskClick) {
              _this.onClose();
            }
          }
        });
      } else if (this.key) {
        this.key = null;
        my.hideOverlay({});
      }
    },
    _onModalClick: function _onModalClick() {
      var onModalClick = this.props.onModalClick;

      if (onModalClick) {
        onModalClick();
      }
    },
    _onButtonClick: function _onButtonClick(e) {
      var onButtonClick = this.props.onButtonClick;

      if (onButtonClick) {
        onButtonClick(e);
      }
    },
    _onModalClose: function _onModalClose() {
      var _this$props = this.props,
          onModalClose = _this$props.onModalClose,
          mask = _this$props.mask;

      if (mask && this.key) {
        this.key = null;
        my.hideOverlay({});
      }

      if (onModalClose) {
        onModalClose();
      }
    },
    _onMaskTap: function _onMaskTap() {
      var onMaskClick = this.props.onMaskClick;

      if (typeof onMaskClick === 'function') {
        onMaskClick();
      } else {
        return false;
      }
    }
  }
});